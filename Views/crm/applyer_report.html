<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>供应商销售报表</title>
</head>
<body>
<form>

</form>
<div id="chart1" style="height: 300px;height: 500px; margin: 0 auto;"></div>
<script src="//cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
<script src="//cdn.bootcss.com/echarts/3.1.10/echarts.common.min.js"></script>
<script>
  $(document).ready(function(){
    var myChart = echarts.init(document.getElementById('chart1'));
    var option = {
      title: {
        text: '供应商/景点销售统计',
        subtext: '30日数据'
      },
      tooltip : {
        trigger: 'axis',
        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
          type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        }
      },
      toolbox: {
        show: true,
        feature: {
          magicType: {show: true, type: ['stack', 'tiled']},
          saveAsImage: {show: true}
        }
      },
      xAxis:{
        type : 'category',
        boundaryGap: false
      },
      yAxis : [
        {
          type : 'value'
        }
      ],
    };

    var load_data = function(t1, t2) {
      //var t1 = t1 || $("input[name='t1']").val(),
      //    t2 = t2 || $("input[name='t2']").val();
      //var server_id = $("select[name=server_id]").find('option:selected').val();
      $.ajax({
        type : "get",
        async : false, //同步执行
        url : 'index.php?c=report_ApplyReport&a=index',
        data : {uid:650,data_type:3},
        dataType : "json", //返回数据形式为json
        before: function(){
          myChart.showLoading();
        },
        success : function(result) {
          if (result) {
            myChart.hideLoading();
            if (result.code!=200) {
              alert("客官,不好意思，没有查到数据!");
            }
            //options.legend.data = result.legend;
            //options.xAxis[0].data = result.category;
            option.xAxis['data'] = result.data.xAxis;
            option.legend = result.data.legend;
            option.series = result.data.series;
            console.log(option);
            myChart.setOption(option);
          }
        },
        error : function(errorMsg) {
          alert("客官,不好意思，图表请求数据失败啦!");
          myChart.hideLoading();
        }
      });
    };
    load_data();
    $("#submit").on('click', function(){
      //myChart.resetOption();
      myChart.clear();
      var t1 = $("input[name='t1']").val(),
          t2 = $("input[name='t2']").val();
      load_data(t1, t2);
    });
    //myChart.setOption(option);
  });
</script>
</body>
</html>